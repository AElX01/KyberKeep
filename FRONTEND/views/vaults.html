<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/ea89dd5152.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="../assets/css/sidebar.css">
    <link rel="stylesheet" href="../assets/css/vaults.css">
</head>
<body>
    <div id="nav-bar">
        <input id="nav-toggle" type="checkbox"/>
        <a id="nav-title" href="#"><div id="nav-header"><img src="../assets/icon/Logo.svg" style="width: 75px; height: 75px;"></a>
          <label for="nav-toggle"><span id="nav-toggle-burger"></span></label>
          <hr/>
        </div>
        <div id="nav-content">
          <div class="nav-button"><a href="/"><i class="fas fa-vault"></i></i><span>My Vaults</span></a></div>
          <div class="nav-button"><a href="/generator"><i class="fas fa-plus"></i><span>Generator</span></a></div>
          <hr/>
          <div class="nav-button"><a href="/settings"><i class="fas fa-gear"></i><span>Settings</span></a></div>
          <div class="nav-button"><a href="/users/logout"><i class="fas fa-right-from-bracket"></i><span>Logout</span></a></div>
          <div id="nav-content-highlight"></div>
        </div>
        <input id="nav-footer-toggle" type="checkbox"/>
        <div id="nav-footer">
          <div id="nav-footer-heading">
            <div id="nav-footer-avatar"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRCx-P-wWDkbH5PcEUCkqlmuY_JmJ2shgwk2w&s"/></div>
            <div id="nav-footer-titlebox"><a id="nav-footer-title" href="/settings"></a><span id="nav-footer-subtitle"></span></div>
            <label for="nav-footer-toggle"><i class="fas fa-caret-up"></i></label>
          </div>
          <div id="nav-footer-content">
            <p id="reused_passwords"></p>
            <p id="insecure_sites"><br>
            <p id="account_health"></p>
          </div>
        </div>
      </div>
      <div id="main-content">
        <div class="header-row">
          <h1 id="vaults-title">My Vaults</h1>
          <div class="group">
            <svg id="search_icon_id" style="display: none;" viewBox="0 0 24 24" aria-hidden="true" class="search-icon">
              <g>
                <path
                  d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"
                ></path>
              </g>
            </svg>
          
            <input
              id="query"
              class="input"
              type="search"
              placeholder="Search..."
              name="searchbar"
              style="display: none;"
            />
          </div>

          <div id="notification_icon" class="warning">
            <div class="warning__icon">
                <svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m13 14h-2v-5h2zm0 4h-2v-2h2zm-12 3h22l-11-19z" fill="#393a37"></path></svg>
            </div>
                <div id="warning_text" class="warning__title"></div>
            <div class="warning__close"><svg height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="m15.8333 5.34166-1.175-1.175-4.6583 4.65834-4.65833-4.65834-1.175 1.175 4.65833 4.65834-4.65833 4.6583 1.175 1.175 4.65833-4.6583 4.6583 4.6583 1.175-1.175-4.6583-4.6583z" fill="#393a37"></path></svg></div>
          </div>
        </div>

        <div id="waiting_logins_container" class="loader-wrapper">
          <h1>Waiting for you to create a login</h1>
          <div class="newtons-cradle">
            <div class="newtons-cradle__dot"></div>
            <div class="newtons-cradle__dot"></div>
            <div class="newtons-cradle__dot"></div>
            <div class="newtons-cradle__dot"></div>
          </div>
        </div>

        <div style="display: none;" id="no_logins_container" class="no-logins-wrapper">
          <h1>No logins found</h1>
          <img width="350px" height="350px" src="../assets/icon/lobster.svg">
        </div>
        
        <div class="vault-grid" id="vault-container">
          <div class="vault-card">
            <img class="vault-icon" src="https://www.google.com/s2/favicons?domain=github.com" alt="GitHub" />

            <div class="vault-info">
              <div class="vault-title">GitHub</div>
              <div class="vault-meta">github.com</div>
            </div>
          
            <div class="vault-actions">
              <button><i class="fas fa-up-right-from-square"></i></button>
              <button><i class="fas fa-ellipsis-vertical"></i></button>
              
            </div>
          </div>  
          
          <div class="vault-card">
            <img class="vault-icon" src="https://www.google.com/s2/favicons?domain=github.com" alt="GitHub" />

            <div class="vault-info">
              <div class="vault-title">Sample</div>
              <div class="vault-meta">github.com</div>
            </div>
          
            <div class="vault-actions">
              <button><i class="fas fa-up-right-from-square"></i></button>
              <button><i class="fas fa-ellipsis-vertical"></i></button>          
            </div>
          </div>  
        </div>

        <button class="new_password" onclick="toggleModal('#create_password_modal')"> 
          <i class="fas fa-plus"></i>
        </button>
      </div> 
      
      <div id="info_modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <button class="modal-close">&times;</button>
      
          <div class="modal-header">
            <img class="vault-icon" src="https://www.google.com/s2/favicons?domain=github.com" alt="Instagram" />
            <h2 class="modal-title">Instagram</h2>
          </div>
      
          <form>
            <h3 class="modal-section-title">Item details</h3>
            <div class="modal-field">
              <label>Item name</label>
              <div class="modal-data">GitHub</div>
            </div>

            <h3 class="modal-section-title">Login information</h3>
            <div class="modal-field-group">
              <div class="modal-field">
                <label>Username</label>
                <input class="modal-data" placeholder="AElX01">
              </div>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-clone"></i></button>
            </div>

            <div class="modal-field-group">
              <div class="modal-field">
                <label>Password</label>
                <input class="modal-data" type="password" placeholder="uyuyuyuy">

              </div>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-eye-slash"></i></button>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-clone"></i></button>
            </div>


            <h3 class="modal-section-title">Autofill options</h3>
            <div class="modal-field-group">
              <div class="modal-field">
                <label>Website</label>
                <input class="modal-data" placeholder="github.com">
              </div>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-up-right-from-square"></i></button>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-clone"></i></button>
            </div>
          
            <div class="modal-actions">
              <button class="edit_btn"><i class="fas fa-pen"></i></button>
              <button class="delete_btn"><i class="fas fa-trash"></i></button>
            </div>
          </form>
        </div>
      </div>

      <div id="create_password_modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <button class="modal-close">&times;</button>
      
          <div class="modal-header">
            <h2 class="modal-title">New Login</h2>
          </div>
      
          <form id="create_password_form">
            <h3 class="modal-section-title">Item details</h3>
            <div class="modal-field">
              <label>Item name</label>
              <input name="name" class="modal-data">
              <label id="item_name_warning" style="color: red; display: none;">Items must have a name</label>
            </div>

            <h3 class="modal-section-title">Login information</h3>
            <div class="modal-field-group">
              <div class="modal-field">
                <label>Username</label>
                <input name="username" class="modal-data" placeholder="github.com">
              </div>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-arrows-rotate"></i></button>
            </div>

            <div class="modal-field-group">
              <div class="modal-field">
                <label>Password</label>
                <input name="password" type="password" class="modal-data" placeholder="github.com">
              </div>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-eye-slash"></i></button>
              <button type="button" class="modal_cpy_btn"><i class="fas fa-arrows-rotate"></i></button>
            </div>


            <h3 class="modal-section-title">Autofill options</h3>
            <div class="modal-field-group">
              <div class="modal-field">
                <label>Website</label>
                <input name="website" class="modal-data" placeholder="github.com">
                <label id="website_warning" style="color: red; display: none;">Items must have a related website</label>
              </div>
            </div>
          
            <div class="modal-actions">
              <a href="/"><button type="button" class="cancel_btn"><i class="fas fa-x"></i> Cancel</button></a>
              <button type="submit" class="edit_btn"><i class="fas fa-pen"></i> Save</button>
            </div>
          </form>
        </div>
      </div>

      <div id="confirmation_modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <button class="modal-close">&times;</button>
      
          <div class="modal-header">
            <h2 class="modal-title">Generate password</h2>
          </div>
      
          <div class="modal-field">
            <p style="text-align: center;">Are you sure you want to save this login information?</p>
          </div>
      
          <div class="modal-actions">
            <button class="edit_btn"><i class="fas fa-pen"></i> Save</button>
            <a href="/vaults"><button class="cancel_btn"><i class="fas fa-x"></i> Cancel</button></a>
          </div>  
        </div> 

        <div id="something_went_wrong_banner" class="flex flex-col gap-2 w-60 sm:w-72 text-[10px] sm:text-xs z-50">
      <div
        class="error-alert cursor-default flex items-center justify-between w-full h-12 sm:h-14 rounded-lg bg-[#232531] px-[10px]"
      >
        <div class="flex gap-2">
          <div class="text-[#d65563] bg-white/5 backdrop-blur-xl p-1 rounded-lg">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"
              ></path>
            </svg>
          </div>
          <div>
            <p id="something_went_wrong_context" class="text-white"></p>
            <p id="something_went_wrong_description" class="text-gray-500"></p>
          </div>
        </div>
      </div>
    
      <div class="progress-bar-container">
        <div id="progress_bar" class="progress-bar"></div>
      </div>
    </div>

    <div id="loader" class="loader-container hidden">
      <div class="loader">
        <div class="square" id="sq1"></div>
        <div class="square" id="sq2"></div>
        <div class="square" id="sq3"></div>
        <div class="square" id="sq4"></div>
        <div class="square" id="sq5"></div>
        <div class="square" id="sq6"></div>
        <div class="square" id="sq7"></div>
        <div class="square" id="sq8"></div>
        <div class="square" id="sq9"></div>
      </div>
    </div>

      <script>
                document.addEventListener("DOMContentLoaded", () => {
            const navToggle = document.getElementById("nav-toggle");
            const mainContent = document.getElementById("main-content");
                

            const adjustMainContent = () => {
                if (navToggle.checked) {

                    mainContent.style.left = `calc(var(--navbar-width-min) + 2vw)`;
                    mainContent.style.transition = "left 0.3s ease"; 
                } else {

                    mainContent.style.left = `calc(var(--navbar-width) + 2vw)`;
                }
            };
          

            adjustMainContent();
          

            navToggle.addEventListener("change", adjustMainContent);
        });
      </script>
      <script>
        function toggleModal(modal_id) {
          const modal = document.querySelector(modal_id);
          modal.style.display = (modal.style.display === 'flex') ? 'none' : 'flex';
        }
      

        document.addEventListener('DOMContentLoaded', () => {
          const closeBtn = document.querySelector('.modal-close');
          closeBtn.addEventListener('click', () => {
            document.querySelector('.modal-overlay').style.display = 'none';
          });
        });
    </script>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const modal = document.querySelector('.modal-overlay');
        const closeBtn = document.querySelector('.modal-close');
      
 
        document.querySelectorAll('.vault-card').forEach(card => {
          card.addEventListener('click', (e) => {

            if (e.target.closest('.vault-actions button')) return;
          
            modal.style.display = 'flex';
          

            const title = card.querySelector('.vault-title').textContent;
            const username = card.querySelector('.vault-meta').textContent;
          
            modal.querySelector('.modal-title').textContent = title;
          });
        });
      
 
        closeBtn.addEventListener('click', () => {
          modal.style.display = 'none';
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const closeModalButtons = document.querySelectorAll(".modal-close");
        const modals = document.querySelectorAll(".modal-overlay");

        closeModalButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const modal = button.closest(".modal-overlay");
            if (modal) {
              modal.style.display = "none"; 
            }
          });
        });
      
        modals.forEach((modal) => {
          modal.addEventListener("click", (event) => {
            if (event.target === modal) {
              modal.style.display = "none";
            }
          });
        });
      });
    </script>

    <script>
      document.querySelector('.warning__close').addEventListener('click', () => {
        const warning = document.getElementById('notification_icon');
        warning.style.display = 'none';
      });
    </script>

    <script src="../controllers/env.js"></script>
    <script type="module" src="../controllers/user_controllers.js"></script>
    <script type="module" src="../controllers/password_controllers.js"></script>
</body>
</html>